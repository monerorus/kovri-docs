# Начало работы с тестовой сетью Kovri

## Преамбула

Тестовая сеть Kovri в настоящее время это несколько Docker контейнеров и образов которые все взаимодействуют через одну Docker сеть.
Это позволяет тестирование частных сетей и мониторинг без необходимости подключаться к публичной kovri сети.

## Необходимые условия

- Linux среда разработки (поддерживается текущий Linux)
   - Смотритеe в kovri [README](https://github.com/monero-project/kovri#building) список зависимостей для сборки
- [Docker](https://www.docker.com/)
   - Пользователь под которым происходит сборка должен иметь права на использование Docker (например, должен быть добавлен в группу docker)
- Склонированный репозиторий
```bash
$ git clone --recursive https://github.com/monero-project/kovri
```

## Шаг 1: Создание тестовой сети

Для получения полного списка параметров, выполните с параметром `help`:
```bash
$ ./kovri/contrib/testnet/testnet.sh help
```
Вы можете экспортировать перечисленные переменные средыиз вашей оболочки или установить их вручную во время установки.

Создание окружения и и установка соответствующих значений:
```bash
$ ./kovri/contrib/testnet/testnet.sh create
```
- Для новых разработчиков, рекомендуется использовать настройки по умолчанию за исключением расположения репозитория
- Смотрите каталог Dockerfiles на предмет доступных Dockerфайлов для сборки во время установки
- Чтобы сохранить репозиторий Kovri чистым, выберите каталог вне репозитория

## Шаг 2a: Запуск тестовой сети

```bash
$ ./kovri/contrib/testnet/testnet.sh start
```
Для просмотра параметров мониторинга выполните с параметром `help`.

## Шаг 2b: Запуск произвольных команд

**TODO(не назначено): улучшить данный раздел**

Для выполнения команд внутри контейнера смотри документацию по Docker.

Вы можете попробовать:
```bash
$ ./contrib/testnet/testnet.sh exec "bash"
```

## Шаг 3: Остановка тестовой сети

```bash
$ ./kovri/contrib/testnet/testnet.sh stop
```
- Вам должно быть предложено установить интервал тайм-аута контейнера(если не задано в окружении)
   - Это полезно в случае зависших маршрутизаторов

## Шаг 4: Удаление тестовой сети

```bash
$ ./kovri/contrib/testnet/testnet.sh destroy
```
- Вам должно быть предложено задать каталог тестовой сети для удаления (если не задано в окружении)
